# CoffeeChat

opensource im with server(go) and client(flutter+swift)

> âš ï¸âš ï¸Warnningâš ï¸âš ï¸
> æŒç»­å¼€å‘ä¸­ï¼Œä»…é€‚åˆå­¦ä¹ ä½¿ç”¨ã€‚

## News

æœ‰ç½‘å‹åœ¨Issuesè¯¢é—®åç»­æ›´æ–°ä¸€äº‹ï¼Œè¿™é‡Œå›å¤ä¸€ä¸‹ï¼š
> ä»Šå¹´äº‹æƒ…æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥è¿›å±•ååˆ†ç¼“æ…¢ï¼Œä¼šä¸ä¼šæ”¾å¼ƒè¿™ä¸ªé¡¹ç›®æˆ‘ä¹Ÿä¸èƒ½è‚¯å®šï¼Œä¸»è¦æ˜¯ä½œè€…ç²¾åŠ›æœ‰é™ï¼Œè¯·å¤§å®¶åŸè°…ã€‚å‘èµ·è¿™ä¸ªé¡¹ç›®çš„åˆè¡·ï¼Œæ˜¯ä¸ºäº†æ›´æ·±å…¥çš„å­¦ä¹ IMæœåŠ¡ç«¯å¼€å‘ï¼Œå¦‚æœæœ‰æ›´å¥½çš„å¼€æºgoè¯­è¨€å®ç°çš„imé¡¹ç›®ï¼Œæˆ‘å¯èƒ½ä¼šè€ƒè™‘ä½œä¸ºContributorå‚ä¸å…¶ä¸­ã€‚

æœ€åï¼Œæ”¾å‡ºæœ€è¿‘çš„ä¸€äº›åŠ¨æ€ä»¥æ„Ÿè°¢å¤§å®¶çš„å…³å¿ƒã€‚

æœ€æ–°åŠ¨æ€ï¼š
- è‡³ä»Š: ç”Ÿå‘½ä¸æ¯ï¼Œæ¢ç´¢ä¸æ­¢ğŸ’ªğŸ’ª
- 2022/07/01: ç›®å‰æ­£åœ¨å¼€å‘v2æ¶æ„ï¼ˆåŸºäºkratos v2æ¡†æ¶ï¼‰ï¼Œæ€»ä½“è®¾è®¡ç”±pb+tcpå˜æ›´ä¸ºhttp+jsonæ¥å£æ–¹å¼ï¼Œé™ä½ä¸Šæ‰‹æˆæœ¬ã€‚è€ƒè™‘åˆ°è‡ªç”±åº¦å’Œæ–¹ä¾¿ä½“éªŒï¼Œç›®å‰æ­£åœ¨å¼€å‘android appã€‚
- ~~2022/04/10ï¼šåˆ¶å®šMonthly Releaseè®¡åˆ’ï¼Œæ¯ä¸ªæœˆè‡³å°‘è¦ä¿è¯ä¸€æ¬¡Release~~
- 2021/08: ä½œè€…æœ€è¿‘åœ¨è€ƒè™‘è·³æ§½ï¼Œæ•…ç²¾åŠ›ä¸»è¦æ”¾åœ¨ç ”ç©¶[OpenIM](https://github.com/OpenIMSDK/Open-IM-Server)ï¼Œå­¦ä¹ Kafkaï¼Œå¾®æœåŠ¡ï¼Œæ”¶ä»¶ç®±ï¼ŒEtcdï¼ŒDockerï¼ŒK8Sç­‰ä½¿ç”¨ï¼Œæå‡æŠ€æœ¯æ·±åº¦ã€‚
- 2021/03 - 07: å¼€å‘QTå®¢æˆ·ç«¯å’ŒC++è·¨å¹³å°SDKï¼Œå—é™äºç²¾åŠ›è¿›å±•ç¼“æ…¢ã€‚
- 2021/02: ä½¿ç”¨sketchè®¾è®¡win+macå®¢æˆ·ç«¯ç•Œé¢ã€‚

æ€»ç»“ï¼š
- `2022`: å†å‡ºå‘ï¼Œå­¦ä¹ android + kratos + k8sï¼Œå®ç°goæœåŠ¡ç«¯v2ç‰ˆæœ¬é‡æ„
- `2021`: ä¸»è¦ç²¾åŠ›åœ¨æ¢ç´¢ç™¾ä¸‡çº§çš„æ¶æ„ï¼ŒC++è·¨å¹³å°SDKï¼ŒQTï¼ŒGoå¾®æœåŠ¡ï¼ŒDockerï¼ŒEtcdç­‰ç­‰ï¼Œcoffeechatå‡ ä¹æ²¡æœ‰æ›´æ–°
- `2020`: è¿™ä¸€å¹´coffeechatä¸æ–­å®Œå–„ï¼Œä½œè€…ä¸»è¦åœ¨å­¦ä¹ ioså¼€å‘ï¼Œå®ç°ç®€å•ios app
- `2019/08`: coffeechatè¯ç”Ÿï¼Œå­¦ä¹ flutterï¼Œå®ç°ç®€å•flutterå®¢æˆ·ç«¯ï¼Œåç»­å› ä¸ºflutterèŠå¤©ç•Œé¢ä¸‹æ‹‰æ„Ÿè§‰æ•ˆæœä¸ç†æƒ³æ”¾å¼ƒ

## Client

æ”¯æŒçš„å®¢æˆ·ç«¯æœ‰ï¼š

- å¼€å‘ä¸­ï¼ˆV2ï¼‰
  - [Android](https://github.com/gomicroim/client-android): åŸºäºandroid 7.0 + javaå®ç°ï¼Œç›®å‰æ­£åœ¨å¼€å‘ä¸­ï¼ˆ2022å¹´8æœˆï¼‰ï¼Œé€‚ç”¨äº `V2ç‰ˆæœ¬` æœåŠ¡ç«¯ã€‚

- æš‚åœä¸­ï¼ˆV1ï¼‰
  - [iOS](https://github.com/xmcy0011/CoffeeChat-iOS)ï¼šåŸºäºswift5å®ç°ï¼Œç›®å‰ä¸»è¦ç»´æŠ¤çš„å®¢æˆ·ç«¯ï¼Œæ¨èä½¿ç”¨ã€‚é€‚ç”¨äº `V1ç‰ˆæœ¬` æœåŠ¡ç«¯ã€‚
  - [Flutter](https://github.com/xmcy0011/CoffeeChat-Flutter)ï¼šåŸºäºflutter2å’Œdartå®ç°ï¼Œç›®å‰å·²ä¸å†ç»´æŠ¤ï¼Œä»…ä¾›å­¦ä¹ ã€‚
  - [Windows](https://github.com/xmcy0011/CoffeeChat-Win)ï¼šåŸºäºc++å’Œç½‘æ˜“duilibå®ç°ï¼Œç›®å‰åªå®ç°äº†ç™»å½•åŠŸèƒ½ã€‚
  - [Mac](https://github.com/xmcy0011/CoffeeChat-Desktop)ï¼šåŸºäºc++å’ŒQt6å®ç°ï¼Œç›®å‰åªå®ç°äº†ç™»å½•åŠŸèƒ½ã€‚

è¯·ç‚¹å‡»å¯¹åº”çš„é“¾æ¥æŸ¥çœ‹è¯¦æƒ…ã€‚

## Preview

### flutter

see [CoffeeChat-Flutter](https://github.com/xmcy0011/CoffeeChat-Flutter) æš‚ä¸ç»´æŠ¤ï¼Œä»…ä¾›å‚è€ƒã€‚

### swift
![screenshot](./docs/images/swift/screenshot.png)  

## Features

### è®¾è®¡

- [x] æ¶æ„è®¾è®¡ï¼šå‚è€ƒç“œå­ IM
- [x] åè®®è®¾è®¡ï¼šå‚è€ƒç½‘æ˜“äº‘ IMã€ç¯ä¿¡ã€TeamTalk
- [x] æ•°æ®åº“è®¾è®¡
- [x] æ¶ˆæ¯åˆ†è¡¨å­˜å‚¨è®¾è®¡
- [x] IM æ¶ˆæ¯ ID ç”Ÿæˆè®¾è®¡

### å•èŠç¾¤èŠ

- [x] flutter å®¢æˆ·ç«¯
- [x] å•èŠ
- [x] æ¶ˆæ¯æ ¼å¼
    - [x] æ–‡æœ¬
    - [ ] è¡¨æƒ…
    - [ ] å›¾ç‰‡
- [x] ä¼šè¯åˆ—è¡¨
- [x] æ¶ˆæ¯å­˜å‚¨
- [x] å†å²æ¶ˆæ¯
- [x] æ¼«æ¸¸æ¶ˆæ¯ï¼ˆç”¨æˆ·åˆ‡æ¢åˆ°ä»»ä½•è®¾å¤‡éƒ½å¯ä»¥è¯»å–åˆ°æœ€è¿‘çš„å†å²æ¶ˆæ¯ï¼‰
- [ ] ç¦»çº¿æ¶ˆæ¯ï¼ˆç”¨æˆ·ç¦»çº¿é‡æ–°ä¸Šçº¿åæ”¶åˆ°æœ€è¿‘ 30 å¤©çš„æœªè¯»æ¶ˆæ¯ï¼‰
- [x] æœªè¯»æ¶ˆæ¯è®¡æ•°
- [ ] æ¶ˆæ¯æ¨é€(APNS)
- [ ] ç¾¤èŠ
- [ ] ç¾¤æœ€é«˜äººæ•°ï¼š200
- [ ] ç¾¤ç®¡ç†ï¼šç¾¤ä¸»ã€åŠ äººã€è¸¢äºº
- [ ] ç¾¤æ¶ˆæ¯å…æ‰“æ‰°
- [ ] ç¾¤æˆå‘˜ç®¡ç†

### æœåŠ¡ç«¯ç‰¹æœ‰

- [ ] consulæ³¨å†Œä¸­å¿ƒ
- [ ] åˆ†å¸ƒå¼é…ç½®ï¼ˆnacosã€etcd...ï¼‰
- [x] dockerfile & docker compose
- [ ] adminåå°å’Œwebç•Œé¢ï¼Œç®€åŒ–å®‰è£…ï¼ˆå‚è€ƒwordpressï¼‰

## å®¢æˆ·ç«¯ç‰¹æœ‰

- [ ] æ¶ˆæ¯æ¨é€æé†’ï¼ˆç³»ç»Ÿé€šçŸ¥æ æ¶ˆæ¯æé†’ï¼‰
- [ ] æ¶ˆæ¯è½¬å‘
- [ ] ç½‘ç»œè¿æ¥çŠ¶æ€
- [ ] å›¾ç‰‡ç®¡ç†å™¨
- [ ] æŸ¥æ‰¾èŠå¤©è®°å½•
- [ ] æ¶ˆæ¯åŒæ­¥ç¼“å­˜
- [x] ä¼šè¯åŒæ­¥ç¼“å­˜
- [ ] å¤´åƒåŒæ­¥ç¼“å­˜
- [ ] æœªè¯»è®¡æ•°æ¡Œé¢è§’æ ‡
- [ ] å…æ‰“æ‰°æ¨¡å¼
- [ ] å›¾ç‰‡å‹ç¼©

### ç‰¹è‰²åŠŸèƒ½

- [ ] é˜…åå³ç„š
- [ ] æ’¤å›
- [ ] æ­£åœ¨è¾“å…¥
- [ ] å·²è¯»å›æ‰§ï¼ˆç”¨æˆ·å‘é€æ¶ˆæ¯ï¼Œè·å–å¯¹æ–¹æ˜¯å¦å·²è¯»çŠ¶æ€ ï¼‰
- [ ] å¤šç»ˆç«¯å·²è¯»åŒæ­¥ï¼ˆåŒä¸ªäº§å“å¤šç»ˆç«¯æƒ…å†µä¸‹ï¼ŒåŒæ­¥æ¶ˆæ¯å·²è¯»æœªè¯»çš„çŠ¶æ€ï¼‰
- [ ] ç«¯åˆ°ç«¯åŠ å¯†
- [ ] é«˜æ¸…è¯­éŸ³æ¶ˆæ¯
- [ ] æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
- [x] è¯­éŸ³é€šè¯(å£°ç½‘FlutterSDK)
- [ ] è§†é¢‘é€šè¯
- [ ] electron è·¨å¹³å°æ¡Œé¢å®¢æˆ·ç«¯
- [x] flutter è·¨å¹³å°ç§»åŠ¨ç«¯
- [ ] swift/iOS å®¢æˆ·ç«¯+SDK

### èŠå¤©æœºå™¨äººåŠŸèƒ½

- [ ] å›¾çµæœºå™¨äººæ¥å…¥
- [ ] å°çˆ±æœºå™¨äººæ¥å…¥
- [x] æ€çŸ¥æœºå™¨äººæ¥å…¥
- [x] å¾®ä¿¡æœºå™¨äººæ¥å…¥

## Architecture

æ¨¡å—æ¶æ„:  
![æ¨¡å—æ¶æ„](https://raw.githubusercontent.com/xmcy0011/CoffeeChat/master/docs/images/structure-v2.png)

å•èŠæ¨¡å—äº¤äº’å›¾:
![å•èŠ](https://raw.githubusercontent.com/xmcy0011/CoffeeChat/master/docs/images/seq-c2c.png)

See More [architecture](https://github.com/xmcy0011/CoffeeChat/blob/master/docs/02-%E6%9E%B6%E6%9E%84%E5%92%8C%E5%8D%8F%E8%AE%AE%E8%AE%BE%E8%AE%A1.md)

## Quick Start

> PSï¼šè¯·åˆ‡æ¢åˆ°**master**åˆ†æ”¯ï¼Œç¼–è¯‘å’Œè¿è¡Œï¼

1. å¯åŠ¨Serverï¼ˆè¦æ±‚å®‰è£…docker desktop >= 4.0.1ï¼‰:

```bash
$ git clone https://github.com/xmcy0011/CoffeeChat.git
$ cd CoffeeChat/server
# ä»ä»£ç ç¼–è¯‘dockeré•œåƒï¼Œå®‰è£…mysql,redisç­‰ä¾èµ–ï¼Œå¹¶è‡ªåŠ¨åˆå§‹åŒ–mysqlæ•°æ®
$ docker-compose up -d
```

1. ç¼–è¯‘å®¢æˆ·ç«¯ã€‚æ¨èiOSå®¢æˆ·ç«¯ï¼ˆæ¨¡æ‹Ÿå™¨é€‰æ‹©iphone 11ï¼‰ï¼Œè¯·ç§»æ­¥ï¼š[client](https://github.com/xmcy0011/CoffeeChat/blob/master/client/cc_flutter_app/README.md)
1. iOSæ¨¡æ‹Ÿå™¨å’Œappå¯åŠ¨åï¼Œç‚¹å‡»â€œæ³¨å†Œâ€ï¼Œæ›´æ”¹æœåŠ¡å™¨IPåœ°å€ä¸ºæœ¬æœºIPï¼ˆä¸éœ€è¦è¾“å…¥ç«¯å£ï¼‰ï¼Œæ³¨å†ŒæˆåŠŸåï¼Œç™»å½•å³å¯ã€‚
1. å†…ç½®äº†2ä¸ªæœºå™¨äººï¼ˆæ€çŸ¥å’Œå¾®ä¿¡ï¼‰å’Œ3ä¸ªå¥½å‹ï¼Œå¯ä»¥æµ‹è¯•èŠå¤©åŠŸèƒ½ã€‚

æ›´å¤šç»†èŠ‚ï¼Œè¯·ç§»æ­¥ï¼š

- [client](https://github.com/xmcy0011/CoffeeChat/blob/master/client/cc_flutter_app/README.md)
- [server](https://github.com/xmcy0011/CoffeeChat/blob/master/server/src/README.md)

åœæ­¢ï¼š

```bash
$ cd CoffeeChat/server
$ docker-compose down -v
```

### Document

1. [äº§å“ä»‹ç»](https://github.com/xmcy0011/CoffeeChat/blob/master/docs/01-%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D.md)
2. [æ¶æ„å’Œåè®®è®¾è®¡](https://github.com/xmcy0011/CoffeeChat/blob/master/docs/02-%E6%9E%B6%E6%9E%84%E5%92%8C%E5%8D%8F%E8%AE%AE%E8%AE%BE%E8%AE%A1.md)
3. [æ¶ˆæ¯åˆ†è¡¨å­˜å‚¨](https://github.com/xmcy0011/CoffeeChat/blob/master/docs/03-%E6%B6%88%E6%81%AF%E5%88%86%E8%A1%A8%E5%AD%98%E5%82%A8.md)
4. [IM æ¶ˆæ¯ ID ç”ŸæˆåŸç†å’Œå¸¸è§æŠ€æœ¯éš¾ç‚¹](https://github.com/xmcy0011/CoffeeChat/blob/master/docs/04_IM%e5%b8%b8%e8%a7%81%e6%8a%80%e6%9c%af%e9%9a%be%e7%82%b9.md)
5. [è¿›åº¦è®¡åˆ’](https://github.com/xmcy0011/CoffeeChat/blob/master/docs/05-%E8%BF%9B%E5%BA%A6%E8%AE%A1%E5%88%92.md)
6. [MQåœ¨IMä¸­çš„å®è·µå’Œé€‰å‹](https://github.com/xmcy0011/CoffeeChat/blob/master/docs/06_MQ%e5%9c%a8IM%e4%b8%ad%e7%9a%84%e5%ae%9e%e8%b7%b5.md)

æ›´å¤šæ–‡ç« è¯·ç§»æ­¥ï¼š

- [CoffeeChat-GitBook](https://xmcy0011.github.io/CoffeeChat-GitBook/)

### Thinks

- [mattermost](https://github.com/mattermost/mattermost-server)ï¼šä¸»è¦å­¦ä¹ å…¶goå·¥ç¨‹å®è·µæ–¹é¢çš„ä¸€äº›æŠ€å·§ï¼Œç›®å‰è¿˜å¤„åœ¨ç ”ç©¶é˜¶æ®µã€‚
- [Open-IM-Server](https://github.com/OpenIMSDK/Open-IM-Server)ï¼šé€šè¿‡åˆ†æå®ƒçš„æ¶æ„å’Œä»£ç ï¼Œç†è§£äº†æ”¶ä»¶ç®±æœºåˆ¶å’Œim å¾®æœåŠ¡(go)çš„åˆ’åˆ†å®è·µã€‚
- [goim](https://github.com/Terry-Mao/goim)ï¼šå­¦ä¹ åˆ°ç™¾ä¸‡çº§æ¶æ„ä¸‹kafkaæ˜¯å¦‚ä½•åº”ç”¨åœ¨èŠå¤©å®¤åœºæ™¯çš„ã€‚
- [Terry-Ye/im](https://github.com/Terry-Ye/im)ï¼šç»“åˆgoimï¼Œç†è§£äº†æ‰€è°“çš„jobå«ä¹‰ï¼Œçœ‹æ‡‚äº†goimçš„æ¶æ„ã€‚
- [gim](https://github.com/alberliu/gim)ï¼šä¸€ä¸ªç®€å•çš„å†™æ‰©æ•£é¡¹ç›®ï¼Œå¯ä»¥æ›´æ·±å…¥ç†è§£å†™æ‰©æ•£çš„æ¶æ„å’ŒåŸç†ã€‚

æ›´å¤šå¼€æºimï¼Œè¯·ç§»æ­¥ï¼š[å²ä¸Šæœ€å…¨å¼€æºIMç›˜ç‚¹](https://blog.csdn.net/xmcy001122/article/details/110679978)

## Contact

emailï¼šxmcy0011@sina.com  
å¾®ä¿¡äº¤æµï¼šxuyc1992ï¼ˆè¯·å¤‡æ³¨ï¼šimï¼‰  

å–œæ¬¢çš„è¯ï¼Œå…³æ³¨ä¸‹å…¬ä¼—å·å§ğŸ˜Š  
ã€ŠGoå’Œåˆ†å¸ƒå¼IMã€‹ğŸ‘ˆğŸ‘ˆ  
![qrcode](./docs/images/qrcode.png)

## LICENSE

CoffeeChat is provided under the [mit license](https://github.com/xmcy0011/CoffeeChat/blob/master/LICENSE).